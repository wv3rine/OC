1) Карамов Степан Геннадевьич БПИ212

2) Вариант 15

Задача о клумбе – 1. На клумбе растет 40 цветов, за ними 
непрерывно следят два процесса–садовника и поливают увядшие 
цветы, при этом оба садовника очень боятся полить один и тот 
же цветок, который еще не начал вянуть. Создать приложение, 
моделирующее состояния цветков на клумбе и действия садовников. 
Для изменения состояния цветов создать отдельный процесс (а не 
40 процессов для каждого цветка), который может задавать 
одновременное начало увядания для нескольких цветков.

3) Цветки - массив int flowers[40], значения которого могут быть либо
0, если цветок не полит, и 1 иначе. Все происходит в рамках одной программы,
которая сначала инициализирует разделяемую память и семафоры POSIX, затем
запускает процесс сада и процессы садовников (их количество вводится с командной
строки, но время sleep'ов подгонялось под 2 садовника, но при остальном количестве
оно так же корректно работает). Массив flowers фактически является указателем
на массив из разделяемой памяти. Схема такая: сначала основной процесс заполняет
массив единицами, затем идет параллельная работа процесса-сада и процессов-садовников.
Параллельно процессы обращаются к flowers и ищут неполитый цветок (flowers[i] == 0),
и поливают его (flowers[i] = 1), если это садовник, и ищут три политых цветка и намеренно
делают их увядающими, если это сад. Синхронизация происходит за счет двоичного семафора:
как только одному из процессов хочется залезть в разделяемую память, семафор блокируется
и разблокировывается он после всех действий. Так же введены временные задержки и логи
в консоли, чтобы лучше читалось происходящее

4) POSIX семафоры и разделяемая память

5-6) По условию задачи как таковое завершение не предусмотрено и выглядит странно
(нельзя подключить новых садовников, значит, они должны работать бесконечно, а
выключение сада тоже выглядит как-то непонятно, особенно если есть альтернатива
CTRL+C). Поэтому использовано CTRL+C и перехватывание сигнала (причем только
в одном из дочерних процессов) для корректного удаления семафора и разделяемой памяти

7) Две демонстрации работы прикреплены к папке